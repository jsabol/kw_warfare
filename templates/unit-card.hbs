<form class="{{#if sheet.config}}kw-warfare-config{{/if}}
	{{#if editable}}kw-organization-editable{{/if}}" autocomplete="off">
	<div class="kw-sheet-container" {{#if unit.color}}style="--primary-color: {{unit.color}}"{{/if}}>
		{{#if editable}}<a class="kw-warfare-unit-config"><i class="fas fa-cog"></i>&nbsp;&nbsp;EDIT</a>{{/if}}
		<div class="kw-overlay"></div>
		<div class="kw-typeicon" title="{{unit.type}}">
			<div class="kw-typeicon-stars">
				{{#if (eq unit.experience "Veteran")}}
					<i class="fas fa-star"></i>
				{{/if}}
				{{#if (eq unit.experience "Elite")}}
					<i class="fas fa-star"></i>
					<i class="fas fa-star"></i>
				{{/if}}
				{{#if (eq unit.experience "Super-Elite")}}
					<i class="fas fa-star"></i>
					<i class="fas fa-star"></i>
					<i class="fas fa-star"></i>
				{{/if}}
			</div>
			<img alt="{{unit.type}}" src="{{unit.type_icon}}"/>
		</div>
		<div class="kw-ancestryicon" title="{{unit.ancestry}}">
			<img alt="{{unit.ancestry}}" src="{{unit.ancestry_icon}}"/>
		</div>
		<label class="kw-unit-name">
			<span>{{actor.name}}</span>
			<input type="text" data-dtype="String" name="name"
						value="{{actor.name}}" placeholder="{{localize 'KW_WARFARE.UnitName'}}">
		</label>
		<div class="kw-commander">
			<span class="kw-commander-prefix">{{localize 'KW_WARFARE.Commander'}}:&nbsp;</span>
			<label>
				<!--FIXME: Long commander names overflow, need to ellipsize -->
				<span class="kw-commander-display">{{unit.commander}}</span>
				<input type="text" class="kw-warfare-unit-commander" data-dtype="String"
							placeholder="&mdash;"
							name="flags.kw-warfare.unit.commander" value="{{unit.commander}}">
			</label>
		</div>
		<div class="kw-body">

		</div>
		<div class="kw-aeqt">
			{{#if (or unit.experience sheet.config)}}
			<label>
				<span>{{unit.experience}},</span>
				<select class="kw-warfare-unit-keyword" data-dtype="String"
							name="flags.kw-warfare.unit.experience">
					<option value="Levies" {{#if (eq unit.experience "Levies")}}selected{{/if}}>Levies</option>
					<option value="Regular" {{#if (eq unit.experience "Regular")}}selected{{/if}}>Regular</option>
					<option value="Veteran" {{#if (eq unit.experience "Veteran")}}selected{{/if}}>Veteran</option>
					<option value="Elite" {{#if (eq unit.experience "Elite")}}selected{{/if}}>Elite</option>
					<option value="Super-Elite" {{#if (eq unit.experience "Super-Elite")}}selected{{/if}}>Super-Elite</option>
				</select>
			</label>
			{{/if}}
			{{#if (or unit.equipment sheet.config)}}
				<label>
					<span>{{unit.equipment}},</span>
					<input type="text" class="kw-warfare-unit-keyword" data-dtype="String"
								name="flags.kw-warfare.unit.equipment"
								value="{{unit.equipment}}"
								placeholder="{{localize 'DND5E.ItemTypeEquipment'}}">
				</label>
			{{/if}}
			{{#if (or unit.ancestry sheet.config)}}
				<label>
					<span>{{unit.ancestry}},</span>
				</label>
			{{/if}}
			<label>
				<span>{{unit.type}}</span>
			</label>
		</div>
		<div class="kw-stats">
			<div class="kw-warfare-stat-short-label">{{localize 'KW_WARFARE.AttackShort'}}</div>
			<div class="kw-warfare-stat-short-label">{{localize 'KW_WARFARE.DefenseShort'}}</div>
			<div class="kw-warfare-stat-short-label">{{localize 'KW_WARFARE.PowerShort'}}</div>
			<div class="kw-warfare-stat-short-label">{{localize 'KW_WARFARE.ToughnessShort'}}</div>
			<div class="kw-warfare-stat-short-label">{{localize 'KW_WARFARE.MoraleShort'}}</div>
			<div class="kw-warfare-stat-short-label">{{localize 'KW_WARFARE.CommandShort'}}</div>
			{{> kw-stat statName='attack' rollable = true stat=unit.stats.attack }}
			{{> kw-stat statName='defense' rollable = false stat=unit.stats.defense }}
			{{> kw-stat statName='power' rollable = true stat=unit.stats.power }}
			{{> kw-stat statName='toughness' rollable = false stat=unit.stats.toughness }}
			{{> kw-stat statName='morale' rollable = true stat=unit.stats.morale }}
			{{> kw-stat statName='command' rollable = true stat=unit.stats.command }}
		</div>
		<div class="kw-size">
			<label>
				<span>{{data.attributes.hp.max}}</span>
				<input type="number" data-dtype="Number" min="1"
							name="data.attributes.hp.max"
							value="{{data.attributes.hp.max}}">
			</label>
		</div>
		<label class="kw-tier">
			<span>{{unit.tier}}</span>
			<input type="number" class="kw-warfare-unit-stat" min="1"
						data-dtype="Number" placeholder="&mdash;"
						name="flags.kw-warfare.unit.tier" value="{{unit.tier}}">
		</label>
		<div class="kw-damage-background">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 726 628"><path d="M723 314 543 625.769H183L3 314 183 2.231h360L723 314z"/></svg>
		</div>
		<label class="kw-damage">
			<span>{{unit.damage}}</span>
			<input type="number" class="kw-warfare-unit-stat" min="1"
						data-dtype="Number" placeholder="&mdash;"
						name="flags.kw-warfare.unit.damage" value="{{unit.damage}}">
		</label>
		<label class="kw-numattacks">
			<span>{{unit.numberOfAttacks}}</span>
			<input type="number" class="kw-warfare-unit-stat" min="1"
						data-dtype="Number" placeholder="&mdash;"
						name="flags.kw-warfare.unit.numberOfAttacks"
						value="{{unit.numberOfAttacks}}">
		</label>
		<div class="kw-traits">
			{{#if unit.traits.length}}
				<section>
					<div class="kw-warfare-unit-traits-label">
						<span class="kw-traits-prefix">{{localize 'KW_WARFARE.Traits'}}</span>
						<span class="kw-warfare-config-add-items">
												<a class="kw-warfare-config-add-item">
														<span>{{localize 'KW_WARFARE.AddTrait'}}</span>
														<i class="fas fa-cog"></i>
												</a>
										</span>
					</div>
					{{#each unit.traits}}
						{{> kw-trait midiQolEnabled='midiQolEnabled'}}
					{{/each}}
				</section>
			{{/if}}
		</div>
	</div>
</form>
